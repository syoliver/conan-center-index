cmake_minimum_required(VERSION 3.0)
project(SociTest)

include("${CMAKE_BINARY_DIR}/conanbuildinfo.cmake")
conan_basic_setup()

if (WITH_EMPTY)
    add_executable(test_empty soci.cpp)
    target_compile_definitions(test_empty PRIVATE BACKEND_EMPTY)
    target_link_libraries(test_empty PUBLIC "${CONAN_LIBS}") #FIXME: use components SOCI::soci_empty)
endif()

if (WITH_SQLITE3)
    add_executable(test_sqlite3 soci.cpp)
    target_compile_definitions(test_sqlite3 PRIVATE BACKEND_SQLITE3)
    target_link_libraries(test_sqlite3 PUBLIC "${CONAN_LIBS}") #FIXME: use components SOCI::soci_sqlite3)
endif()

if (WITH_MYSQL)
    add_executable(test_mysql mysql.cpp)
    target_compile_definitions(test_mysql PUBLIC BACKEND_MYSQL)
    target_link_libraries(test_mysql PUBLIC "${CONAN_LIBS}") #FIXME: use components SOCI::soci_mysql)
endif()

if (WITH_ODBC)
    add_executable(test_odbc odbc.cpp)
    target_compile_definitions(test_odbc PUBLIC BACKEND_ODBC)
    target_link_libraries(test_odbc PUBLIC "${CONAN_LIBS}") #FIXME: use components SOCI::soci_odbc)
endif()

if (WITH_POSTGRESQL)
    add_executable(test_postgresql postgresql.cpp)
    target_compile_definitions(test_postgresql PUBLIC BACKEND_POSTGRESQL)
    target_link_libraries(test_postgresql PUBLIC "${CONAN_LIBS}") #FIXME: use components SOCI::soci_postgresql)
endif()
